<!doctype html>
<html lang="tr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Ödeme Takip</title>

  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#111827" />
  <link rel="stylesheet" href="style.css" />

  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
</head>

<body>
  <div class="wrap">
    <header>
      <h1>Ödeme Takip</h1>
      <div class="sub">Ay seç → gider ekle → tik at → bakiye düşsün.</div>
    </header>

    <!-- AY SEKME -->
    <section class="card">
      <div class="row">
        <h2>Aylık</h2>
        <div class="monthActions">
          <button id="prevMonth" class="btn ghost">◀</button>
          <button id="nextMonth" class="btn ghost">▶</button>
        </div>
      </div>
      <div class="monthsBar" id="monthsBar"></div>
    </section>

    <section class="card">
      <h2>Gelir</h2>
      <div class="grid2">
        <label>
          Aylık Gelir
          <input id="income" type="number" inputmode="decimal" placeholder="0">
        </label>
        <label>
          Ek Gelir
          <input id="extraIncome" type="number" inputmode="decimal" placeholder="0">
        </label>
      </div>

      <div class="summary">
        <div>
          <div class="k">Toplam Gelir</div>
          <div class="v" id="totalIncome">0</div>
        </div>
        <div>
          <div class="k">Ödenen Gider</div>
          <div class="v" id="paidTotal">0</div>
        </div>
        <div>
          <div class="k">Ödenmemiş Gider</div>
          <div class="v" id="unpaidTotal">0</div>
        </div>
        <div class="balance">
          <div class="k">Kalan Bakiye</div>
          <div class="v" id="balance">0</div>
        </div>
      </div>
    </section>

    <section class="card">
      <div class="row">
        <h2>Giderler</h2>
        <button id="clearPaid" class="btn ghost" title="Bu ayın ödenenlerini listeden kaldırır">Ödenenleri Temizle</button>
      </div>

      <!-- DESKTOP TABLO -->
      <div class="tableWrap desktopOnly">
        <table>
          <thead>
            <tr>
              <th style="width:70px;">Ödendi</th>
              <th>Açıklama</th>
              <th style="width:120px;">Kategori</th>
              <th style="width:120px;">Vade</th>
              <th style="width:120px;">Tutar</th>
              <th style="width:170px;"></th>
            </tr>
          </thead>
          <tbody id="expenseBody"></tbody>
        </table>
      </div>

      <!-- MOBILE KART LİSTE -->
      <div class="mobileOnly" id="expenseCards"></div>
    </section>

    <section class="card">
      <h2>Yeni Gider Ekle</h2>
      <div class="grid3">
        <label>
          Açıklama
          <input id="newTitle" type="text" placeholder="Kira, internet, elektrik...">
        </label>
        <label>
          Kategori
          <input id="newCategory" type="text" placeholder="Fatura">
        </label>
        <label>
          Vade
          <input id="newDue" type="date">
        </label>
        <label class="span2">
          Tutar
          <input id="newAmount" type="number" inputmode="decimal" placeholder="0">
        </label>
        <div class="actions">
          <button id="addExpense" class="btn">Ekle</button>
        </div>
      </div>
    </section>

    <!-- DÜZENLEME MODAL -->
    <dialog id="editDlg" class="dlg">
      <form method="dialog" class="dlgBox">
        <h3>Gider Düzenle</h3>

        <label>
          Açıklama
          <input id="editTitle" type="text">
        </label>

        <label>
          Kategori
          <input id="editCategory" type="text">
        </label>

        <label>
          Vade
          <input id="editDue" type="date">
        </label>

        <label>
          Tutar
          <input id="editAmount" type="number" inputmode="decimal">
        </label>

        <div class="dlgActions">
          <button id="cancelEdit" class="btn ghost" value="cancel">Vazgeç</button>
          <button id="saveEdit" class="btn" value="default">Kaydet</button>
        </div>
      </form>
    </dialog>

    <footer class="foot">
      Veriler sadece cihazında. Repo public olsa da rakamların kimseye gitmez.
    </footer>
  </div>

  <script src="app.js"></script>
  <script>
    if ("serviceWorker" in navigator) {
      navigator.serviceWorker.register("./sw.js");
    }
  </script>
</body>
</html>
